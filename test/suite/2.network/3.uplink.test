# set the test parameters
export UPLINK_EXEC="ip netns exec nonsense:uplink"
export TARGET_IP=10.0.0.1
export UPLINK="ns.uplink"
export IMMEDIATE=1

# setup nonsense
token=$(nonsensectl get new-transaction-token)
nonsensectl -t ${token} add namespace uplink type netns role root
nonsensectl -t ${token} commit

# run the test
test_dir="$(cd "$(dirname "${BASH_SOURCE[0]}")" >/dev/null 2>&1 && pwd)"
bash -exu "${test_dir}/uplink.template"

# vim: ft=sh

